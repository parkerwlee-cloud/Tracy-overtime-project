{% extends "base.html" %}
{% block content %}
<h2>Kiosk</h2>
{% for day in grid %}
  <div class="card">
    <div class="row">
      <h3 style="margin:0">{{ day.date }}</h3>
    </div>
    <table>
      <thead>
        <tr><th style="width:120px">Slot</th><th style="width:120px">Taken / Cap</th><th>Sign Up</th></tr>
      </thead>
      <tbody>
      {% for r in day.rows %}
        <tr>
          <td>{{ r.label }}</td>
          <td>{{ r.taken }} / {{ r.capacity }}</td>
          <td>
            {% if r.disabled %}
              <span class="muted">{{ r.state_hint or "Closed" }}</span>
            {% elif r.capacity <= r.taken %}
              <span class="muted">Full</span>
            {% else %}
              <form method="post" action="/api/signup" class="row">
                <input type="hidden" name="slot_id" value="{{ r.slot_id }}">
                <input name="employee_id" placeholder="Employee ID" required style="width:10rem">
                <button type="submit">Sign up</button>
              </form>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
{% endfor %}
{% endblock %}
