{% extends "_base.html" %}
{% block content %}
<h2>Admin Panel</h2>

<div class="row">
  <a class="btn" href="{{ url_for('admin_employees') }}">Manage Employees</a>
  <a class="btn secondary" href="{{ url_for('wallboard') }}">View Wallboard</a>
</div>

<h3 style="margin-top:1rem">Slots (capacity & categories)</h3>
<table>
  <tr>
    <th>Date</th>
    <th>Code</th>
    <th>Capacity</th>
    <th>Categories</th>
  </tr>
  {% for r in rows %}
  <tr>
    <td>{{ r.date }}</td>
    <td>{{ r.code }}</td>
    <td>
      <form method="POST" action="{{ url_for('admin_set_capacity', slot_id=r.id) }}">
        <input type="number" name="capacity" value="{{ r.capacity }}" min="0" style="width:5rem">
        <button class="btn" type="submit">Save</button>
      </form>
    </td>
    <td>
      <form method="POST" action="{{ url_for('admin_set_slot_categories', slot_id=r.id) }}">
        <select name="categories" multiple size="4">
          {% for c in categories %}
            <option value="{{ c }}" {% if c in r.cats %}selected{% endif %}>{{ c }}</option>
          {% endfor %}
        </select>
        <button class="btn" type="submit">Update</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
