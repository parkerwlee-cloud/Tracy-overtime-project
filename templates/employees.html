{% extends "base.html" %}
{% block content %}
<h2>Employees</h2>

<div class="card" style="max-width:700px">
  <form method="post" action="{{ url_for('admin_emp_create') }}" class="row" style="flex-wrap:wrap; gap:.5rem">
    <input name="name" placeholder="First Last" required style="flex:1 1 180px">
    <input name="clock_number" placeholder="Clock #" pattern="\d{4}" required style="width:8rem">
    <input name="phone" placeholder="Phone">
    <select name="categories" multiple size="3">
      {% for c in categories %}<option value="{{ c }}">{{ c }}</option>{% endfor %}
    </select>
    <button class="btn" type="submit">Add</button>
  </form>
</div>

<table>
  <tr><th>Clock</th><th>Name</th><th>Phone</th><th>Categories</th><th>Actions</th></tr>
  {% for e in employees %}
  <tr>
    <td>{{ e.clock_number }}</td>
    <td>{{ e.name }}</td>
    <td>{{ e.phone }}</td>
    <td>{{ ", ".join(e.cats) }}</td>
    <td>
      <form method="post" action="{{ url_for('admin_emp_delete', emp_id=e.id) }}" onsubmit="return confirm('Delete this employee?')">
        <button class="btn" type="submit">Delete</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
